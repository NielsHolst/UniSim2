// phys-dev-5.box
Simulation sim {
  .steps = 30
  StageAndPhase distDelay {
    .initial = 100 
    .duration = 13
    .k = 10
    .timeStep = 1
    .growthFactor = 2
    .phaseDuration = 10
    .phaseK = 5
    .phaseTimeStep = 1
  }
  OutputR {
    PageR {
      .ncol = 1
      &ggplot = "geom_vline(xintercept=c(13,10), colour=unisim_colours[1:2], linetype='longdash') + geom_point() + geom_line() + scale_x_continuous(breaks=5*(0:6))"
      PlotR {
        .ports = distDelay[content]
        .ggplot = ..[ggplot] + "+ labs(x='') + theme(legend.position='right')"
      }
      PlotR {
        .layout = "merged"
        .ports = distDelay[outflowSum] | distDelay[phaseOutflowSum]
        .ggplot = ..[ggplot] + "+ labs(x='')"
      }
      PlotR {
        .layout = "merged"
        .ports = distDelay[outflowTotal] |distDelay[phaseOutflowTotal]
        .ggplot = ..[ggplot]
      }
    }
  }
}

